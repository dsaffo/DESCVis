{"version":3,"file":"visconnect-bundle.js","sources":["node_modules/tslib/tslib.es6.js","node_modules/two-product/two-product.js","node_modules/robust-sum/robust-sum.js","node_modules/two-sum/two-sum.js","node_modules/robust-scale/robust-scale.js","node_modules/robust-subtract/robust-diff.js","node_modules/robust-orientation/orientation.js","node_modules/robust-point-in-polygon/robust-pnp.js","src/util.ts","src/ui.ts","src/listener.ts","src/dom.ts","node_modules/rxjs/src/internal/util/isFunction.ts","node_modules/rxjs/src/internal/config.ts","node_modules/rxjs/src/internal/util/hostReportError.ts","node_modules/rxjs/src/internal/Observer.ts","node_modules/rxjs/src/internal/util/isArray.ts","node_modules/rxjs/src/internal/util/isObject.ts","node_modules/rxjs/src/internal/util/UnsubscriptionError.ts","node_modules/rxjs/src/internal/Subscription.ts","node_modules/rxjs/src/internal/symbol/rxSubscriber.ts","node_modules/rxjs/src/internal/Subscriber.ts","node_modules/rxjs/src/internal/util/canReportError.ts","node_modules/rxjs/src/internal/util/toSubscriber.ts","node_modules/rxjs/src/internal/symbol/observable.ts","node_modules/rxjs/src/internal/util/noop.ts","node_modules/rxjs/src/internal/util/pipe.ts","node_modules/rxjs/src/internal/Observable.ts","node_modules/rxjs/src/internal/util/ObjectUnsubscribedError.ts","node_modules/rxjs/src/internal/SubjectSubscription.ts","node_modules/rxjs/src/internal/Subject.ts","src/peerjs-connection.ts","src/peerjs-network.ts","src/communication.ts","src/protocol.ts","src/lock-service.ts","src/leader-protocol.ts","src/visconnect.ts","src/main.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\"use strict\"\n\nmodule.exports = twoProduct\n\nvar SPLITTER = +(Math.pow(2, 27) + 1.0)\n\nfunction twoProduct(a, b, result) {\n  var x = a * b\n\n  var c = SPLITTER * a\n  var abig = c - a\n  var ahi = c - abig\n  var alo = a - ahi\n\n  var d = SPLITTER * b\n  var bbig = d - b\n  var bhi = d - bbig\n  var blo = b - bhi\n\n  var err1 = x - (ahi * bhi)\n  var err2 = err1 - (alo * bhi)\n  var err3 = err2 - (ahi * blo)\n\n  var y = alo * blo - err3\n\n  if(result) {\n    result[0] = y\n    result[1] = x\n    return result\n  }\n\n  return [ y, x ]\n}","\"use strict\"\n\nmodule.exports = linearExpansionSum\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction linearExpansionSum(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = fastTwoSum\n\nfunction fastTwoSum(a, b, result) {\n\tvar x = a + b\n\tvar bv = x - a\n\tvar av = x - bv\n\tvar br = b - bv\n\tvar ar = a - av\n\tif(result) {\n\t\tresult[0] = ar + br\n\t\tresult[1] = x\n\t\treturn result\n\t}\n\treturn [ar+br, x]\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar twoSum = require(\"two-sum\")\n\nmodule.exports = scaleLinearExpansion\n\nfunction scaleLinearExpansion(e, scale) {\n  var n = e.length\n  if(n === 1) {\n    var ts = twoProduct(e[0], scale)\n    if(ts[0]) {\n      return ts\n    }\n    return [ ts[1] ]\n  }\n  var g = new Array(2 * n)\n  var q = [0.1, 0.1]\n  var t = [0.1, 0.1]\n  var count = 0\n  twoProduct(e[0], scale, q)\n  if(q[0]) {\n    g[count++] = q[0]\n  }\n  for(var i=1; i<n; ++i) {\n    twoProduct(e[i], scale, t)\n    var pq = q[1]\n    twoSum(pq, t[0], q)\n    if(q[0]) {\n      g[count++] = q[0]\n    }\n    var a = t[1]\n    var b = q[1]\n    var x = a + b\n    var bv = x - a\n    var y = b - bv\n    q[1] = x\n    if(y) {\n      g[count++] = y\n    }\n  }\n  if(q[1]) {\n    g[count++] = q[1]\n  }\n  if(count === 0) {\n    g[count++] = 0.0\n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = robustSubtract\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction robustSubtract(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = -f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = -f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar robustSubtract = require(\"robust-subtract\")\n\nvar NUM_EXPAND = 5\n\nvar EPSILON     = 1.1102230246251565e-16\nvar ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON\nvar ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length-1)\n  for(var i=1; i<m.length; ++i) {\n    var r = result[i-1] = new Array(m.length-1)\n    for(var j=0,k=0; j<m.length; ++j) {\n      if(j === c) {\n        continue\n      }\n      r[k++] = m[i][j]\n    }\n  }\n  return result\n}\n\nfunction matrix(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = new Array(n)\n    for(var j=0; j<n; ++j) {\n      result[i][j] = [\"m\", j, \"[\", (n-i-1), \"]\"].join(\"\")\n    }\n  }\n  return result\n}\n\nfunction sign(n) {\n  if(n & 1) {\n    return \"-\"\n  }\n  return \"\"\n}\n\nfunction generateSum(expr) {\n  if(expr.length === 1) {\n    return expr[0]\n  } else if(expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\")\n  } else {\n    var m = expr.length>>1\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\")\n  }\n}\n\nfunction determinant(m) {\n  if(m.length === 2) {\n    return [[\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\")]\n  } else {\n    var expr = []\n    for(var i=0; i<m.length; ++i) {\n      expr.push([\"scale(\", generateSum(determinant(cofactor(m, i))), \",\", sign(i), m[0][i], \")\"].join(\"\"))\n    }\n    return expr\n  }\n}\n\nfunction orientation(n) {\n  var pos = []\n  var neg = []\n  var m = matrix(n)\n  var args = []\n  for(var i=0; i<n; ++i) {\n    if((i&1)===0) {\n      pos.push.apply(pos, determinant(cofactor(m, i)))\n    } else {\n      neg.push.apply(neg, determinant(cofactor(m, i)))\n    }\n    args.push(\"m\" + i)\n  }\n  var posExpr = generateSum(pos)\n  var negExpr = generateSum(neg)\n  var funcName = \"orientation\" + n + \"Exact\"\n  var code = [\"function \", funcName, \"(\", args.join(), \"){var p=\", posExpr, \",n=\", negExpr, \",d=sub(p,n);\\\nreturn d[d.length-1];};return \", funcName].join(\"\")\n  var proc = new Function(\"sum\", \"prod\", \"scale\", \"sub\", code)\n  return proc(robustSum, twoProduct, robustScale, robustSubtract)\n}\n\nvar orientation3Exact = orientation(3)\nvar orientation4Exact = orientation(4)\n\nvar CACHED = [\n  function orientation0() { return 0 },\n  function orientation1() { return 0 },\n  function orientation2(a, b) { \n    return b[0] - a[0]\n  },\n  function orientation3(a, b, c) {\n    var l = (a[1] - c[1]) * (b[0] - c[0])\n    var r = (a[0] - c[0]) * (b[1] - c[1])\n    var det = l - r\n    var s\n    if(l > 0) {\n      if(r <= 0) {\n        return det\n      } else {\n        s = l + r\n      }\n    } else if(l < 0) {\n      if(r >= 0) {\n        return det\n      } else {\n        s = -(l + r)\n      }\n    } else {\n      return det\n    }\n    var tol = ERRBOUND3 * s\n    if(det >= tol || det <= -tol) {\n      return det\n    }\n    return orientation3Exact(a, b, c)\n  },\n  function orientation4(a,b,c,d) {\n    var adx = a[0] - d[0]\n    var bdx = b[0] - d[0]\n    var cdx = c[0] - d[0]\n    var ady = a[1] - d[1]\n    var bdy = b[1] - d[1]\n    var cdy = c[1] - d[1]\n    var adz = a[2] - d[2]\n    var bdz = b[2] - d[2]\n    var cdz = c[2] - d[2]\n    var bdxcdy = bdx * cdy\n    var cdxbdy = cdx * bdy\n    var cdxady = cdx * ady\n    var adxcdy = adx * cdy\n    var adxbdy = adx * bdy\n    var bdxady = bdx * ady\n    var det = adz * (bdxcdy - cdxbdy) \n            + bdz * (cdxady - adxcdy)\n            + cdz * (adxbdy - bdxady)\n    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)\n                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)\n                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)\n    var tol = ERRBOUND4 * permanent\n    if ((det > tol) || (-det > tol)) {\n      return det\n    }\n    return orientation4Exact(a,b,c,d)\n  }\n]\n\nfunction slowOrient(args) {\n  var proc = CACHED[args.length]\n  if(!proc) {\n    proc = CACHED[args.length] = orientation(args.length)\n  }\n  return proc.apply(undefined, args)\n}\n\nfunction generateOrientationProc() {\n  while(CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length))\n  }\n  var args = []\n  var procArgs = [\"slow\"]\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    args.push(\"a\" + i)\n    procArgs.push(\"o\" + i)\n  }\n  var code = [\n    \"function getOrientation(\", args.join(), \"){switch(arguments.length){case 0:case 1:return 0;\"\n  ]\n  for(var i=2; i<=NUM_EXPAND; ++i) {\n    code.push(\"case \", i, \":return o\", i, \"(\", args.slice(0, i).join(), \");\")\n  }\n  code.push(\"}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation\")\n  procArgs.push(code.join(\"\"))\n\n  var proc = Function.apply(undefined, procArgs)\n  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    module.exports[i] = CACHED[i]\n  }\n}\n\ngenerateOrientationProc()","module.exports = robustPointInPolygon\n\nvar orient = require('robust-orientation')\n\nfunction robustPointInPolygon(vs, point) {\n  var x = point[0]\n  var y = point[1]\n  var n = vs.length\n  var inside = 1\n  var lim = n\n  for(var i = 0, j = n-1; i<lim; j=i++) {\n    var a = vs[i]\n    var b = vs[j]\n    var yi = a[1]\n    var yj = b[1]\n    if(yj < yi) {\n      if(yj < y && y < yi) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (0 < s)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yi < yk) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (0 < s)|0\n          }\n        }\n      }\n    } else if(yi < yj) {\n      if(yi < y && y < yj) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (s < 0)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yk < yi) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (s < 0)|0\n          }\n        }\n      }\n    } else if(y === yi) {\n      var x0 = Math.min(a[0], b[0])\n      var x1 = Math.max(a[0], b[0])\n      if(i === 0) {\n        while(j>0) {\n          var k = (j+n-1)%n\n          var p = vs[k]\n          if(p[1] !== y) {\n            break\n          }\n          var px = p[0]\n          x0 = Math.min(x0, px)\n          x1 = Math.max(x1, px)\n          j = k\n        }\n        if(j === 0) {\n          if(x0 <= x && x <= x1) {\n            return 0\n          }\n          return 1 \n        }\n        lim = j+1\n      }\n      var y0 = vs[(j+n-1)%n][1]\n      while(i+1<lim) {\n        var p = vs[i+1]\n        if(p[1] !== y) {\n          break\n        }\n        var px = p[0]\n        x0 = Math.min(x0, px)\n        x1 = Math.max(x1, px)\n        i += 1\n      }\n      if(x0 <= x && x <= x1) {\n        return 0\n      }\n      var y1 = vs[(i+1)%n][1]\n      if(x < x0 && (y0 < y !== y1 < y)) {\n        inside ^= 1\n      }\n    }\n  }\n  return 2 * inside - 1\n}","// @ts-ignore\nimport classifyPoint from 'robust-point-in-polygon';\n\ntype D3Element = HTMLElement & {__data__: any};\ntype VcPointerEvent = (MouseEvent | TouchEvent) & {collaboratorId: string; isLocalEvent: boolean};\n\nexport class VisConnectUtil {\n    static drag() {\n        const data = {\n            elements: null as D3Element[] | null,\n            draggingElements: {} as {[collaborator: string]: D3Element},\n            offset: {} as {[collaborator: string]: [number, number]},\n            onStart: (data: any) => {},\n            onEnd: (data: any) => {},\n            onDrag: (data: any) => {},\n        };\n\n        const dragStart = (element: D3Element) => {\n            return (event: VcPointerEvent) => {\n                if (!VisConnectUtil.setCustomEvent(event)) {\n                    return;\n                }\n\n                const mousePos = this.mouse(event.target as D3Element);\n                const dataX = element.__data__.x || 0;\n                const dataY = element.__data__.y || 0;\n                data.offset[event.collaboratorId] = [mousePos[0] - dataX, mousePos[1] - dataY];\n                data.draggingElements[event.collaboratorId] = element;\n                data.onStart.call(element, element.__data__);\n            };\n        };\n\n        const dragMove = (event: VcPointerEvent) => {\n            let d3Event;\n            if (!(d3Event = VisConnectUtil.setCustomEvent(event))) {\n                return;\n            }\n            const element = data.draggingElements[event.collaboratorId];\n            if (!element) {\n                return;\n            }\n\n            d3Event.x -= data.offset[event.collaboratorId][0];\n            d3Event.y -= data.offset[event.collaboratorId][1];\n\n            data.onDrag.call(element, element.__data__);\n        };\n\n        const dragEnd = (event: VcPointerEvent) => {\n            if (!VisConnectUtil.setCustomEvent(event)) {\n                return;\n            }\n            const element = data.draggingElements[event.collaboratorId];\n            if (element) {\n                delete data.draggingElements[event.collaboratorId];\n                data.onEnd.call(element, element.__data__);\n            }\n        };\n\n        const drag = function (selection: {_groups: [[D3Element]]}) {\n            const elements = selection._groups[0].filter((element: any) => element);\n            if (!elements.length) {\n                return;\n            }\n\n            data.elements = elements;\n\n            for (const element of data.elements) {\n                element.addEventListener('mousedown', (e) =>\n                    dragStart(element)(e as VcPointerEvent)\n                );\n                element.addEventListener('touchstart', (e) =>\n                    dragStart(element)(e as VcPointerEvent)\n                );\n            }\n\n            window.addEventListener('mousemove', (e) => dragMove(e as VcPointerEvent));\n            window.addEventListener('touchmove', (e) => dragMove(e as VcPointerEvent));\n            window.addEventListener('mouseup', (e) => dragEnd(e as VcPointerEvent));\n            window.addEventListener('touchend', (e) => dragEnd(e as VcPointerEvent));\n        };\n\n        drag.on = (type: string, callback: (data: any) => void) => {\n            if (type === 'start') {\n                data.onStart = callback;\n            } else if (type === 'drag') {\n                data.onDrag = callback;\n            } else if (type === 'end') {\n                data.onEnd = callback;\n            } else {\n                console.error('Drag type ', type, ' not defined.');\n            }\n            return drag;\n        };\n\n        return drag;\n    }\n\n    static setCustomEvent(event: VcPointerEvent) {\n        const pos = point(event);\n        if (!pos) {\n            return null;\n        }\n        const newEvent = {sourceEvent: event, x: pos.x, y: pos.y};\n        (window as any)['d3'].event = newEvent;\n\n        return newEvent;\n    }\n\n    static brush() {\n        const data = {\n            svg: {} as D3Selection,\n            onStart: (() => {}) as (data?: any) => void,\n            onBrush: (() => {}) as (data?: any) => void,\n            onEnd: (() => {}) as (data?: any) => void,\n        };\n        const collaboratorBrushes: {[collaboratorId: string]: any} = {};\n\n        document.body.addEventListener('brush-message', (e) => {\n            const event = e as Event & {\n                detail: {event: any};\n                collaboratorId: string;\n                collaboratorColor: string;\n                type: string;\n            };\n\n            if (event.type === 'brush') {\n                if (!collaboratorBrushes[event.collaboratorId]) {\n                    collaboratorBrushes[event.collaboratorId] = data.svg\n                        .append('rect')\n                        .attr('fill', event.collaboratorColor)\n                        .attr('opacity', '0.4')\n                        .style('pointer-events', 'none');\n                }\n                const rect = collaboratorBrushes[event.collaboratorId];\n                const [[x0, y0], [x1, y1]] = event.detail.event;\n\n                rect.attr('x', x0)\n                    .attr('y', y0)\n                    .attr('width', `${x1 - x0}`)\n                    .attr('height', `${y1 - y0}`);\n            }\n        });\n\n        const brush = function (svg: any) {\n            data.svg = svg;\n            return d3b.call(d3b, svg);\n        };\n\n        brush.extent = () => {\n            d3b.extent.apply(d3b, arguments);\n            return brush;\n        };\n        brush.start = function (this: HTMLElement, p: any) {\n            const evtData = {\n                detail: {\n                    event: d3.event.selection,\n                    collaboratorId: d3.event.collaboratorId,\n                    type: 'start',\n                },\n            };\n            document.body.dispatchEvent(new CustomEvent('brush-message', evtData));\n            data.onStart.call(this, p);\n        };\n        brush.move = function (this: HTMLElement, p: any, t?: any) {\n            if (this === null) {\n                d3b.move.call(null, p);\n            }\n            const evtData = {\n                detail: {\n                    event: d3.event.selection,\n                    collaboratorId: d3.event.collaboratorId,\n                    type: 'brush',\n                },\n            };\n            document.body.dispatchEvent(new CustomEvent('brush-message', evtData));\n            data.onBrush.call(this, p);\n        };\n        brush.end = function (this: HTMLElement, p: any) {\n            const evtData = {\n                detail: {\n                    event: d3.event.selection,\n                    collaboratorId: d3.event.collaboratorId,\n                    type: 'end',\n                },\n            };\n            document.body.dispatchEvent(new CustomEvent('brush-message', evtData));\n            data.onEnd.call(this, p);\n        };\n\n        brush.on = (type: string, callback: () => void) => {\n            if (type === 'start') {\n                data.onStart = callback;\n            } else if (type === 'brush') {\n                data.onBrush = callback;\n            } else if (type === 'end') {\n                data.onEnd = callback;\n            } else {\n                console.error('Drag type ', type, ' not defined.');\n            }\n            return brush;\n        };\n\n        const d3b = d3\n            .brush()\n            .on('start', brush.start)\n            .on('brush', brush.move)\n            .on('end', brush.end);\n\n        return brush;\n    }\n\n    static lasso() {\n        const data = {\n            svg: {} as D3Selection,\n            lassoGs: {} as {[collId: string]: D3Selection},\n            drawing: {} as {[collId: string]: boolean},\n            start: {} as {[collId: string]: [number, number]},\n            positions: {} as {[collId: string]: [number, number][]},\n            items: null as D3Selection | null,\n            mode: 'divide' as 'divide' | 'join',\n            getItemPos: (() => [0, 0]) as (item: D3Selection) => [number, number],\n            possibleItems: [] as any[],\n            notPossibleItems: [] as any[],\n            onStart: () => {},\n            onDraw: () => {},\n            onEnd: () => {},\n        };\n\n        const lasso = (svg: D3Selection) => {\n            data.svg = svg;\n\n            const drag = vc.drag();\n\n            drag.on('start', () => {\n                const collId = d3.event.sourceEvent.collaboratorId;\n\n                data.drawing[collId] = true;\n                data.start[collId] = [d3.event.x, d3.event.y];\n                data.positions[collId] = [];\n\n                let lassoG = data.lassoGs[collId];\n                if (!lassoG) {\n                    lassoG = svg.append('g');\n                    data.lassoGs[collId] = lassoG;\n                }\n\n                lassoG.selectAll('path').remove();\n                lassoG\n                    .append('path')\n                    .attr('stroke', 'grey')\n                    .attr('opacity', '0.5')\n                    .style('pointer-events', 'none')\n                    .attr('fill', d3.event.sourceEvent.collaboratorColor);\n\n                lassoG.selectAll('circle').remove();\n                lassoG\n                    .append('circle')\n                    .attr('r', 4)\n                    .attr('cx', data.start[collId][0])\n                    .attr('cy', data.start[collId][1])\n                    .style('pointer-events', 'none')\n                    .attr('fill', d3.event.sourceEvent.collaboratorColor);\n\n                if (collId === vc.ownId || data.mode === 'join') {\n                    data.onStart();\n                }\n            });\n\n            drag.on('drag', () => {\n                const collId = d3.event.sourceEvent.collaboratorId;\n\n                if (data.drawing[collId]) {\n                    data.positions[collId].push([d3.event.x, d3.event.y]);\n\n                    const lassoG = data.lassoGs[collId];\n                    lassoG\n                        .select('path')\n                        .attr(\n                            'd',\n                            () =>\n                                'M' +\n                                data.positions[collId]\n                                    .map((pos) => `${pos[0]},${pos[1]}`)\n                                    .reduce((a, b) => `${a} L${b}`) +\n                                'Z'\n                        );\n\n                    if (collId === vc.ownId || data.mode === 'join') {\n                        data.onDraw();\n                    }\n                }\n            });\n\n            drag.on('end', () => {\n                const collId = d3.event.sourceEvent.collaboratorId;\n\n                data.drawing[collId] = false;\n                data.start[collId] = [0, 0];\n\n                //const lassoG = data.lassoGs[collId];\n                //lassoG.selectAll('path').remove();\n                //lassoG.selectAll('circle').remove();\n\n                if (collId === vc.ownId || data.mode === 'join') {\n                    data.onEnd();\n                }\n            });\n\n            svg.call(drag);\n        };\n\n        lasso.items = (items?: D3Selection) => {\n            if (items) {\n                data.items = items;\n                return lasso;\n            }\n            return data.items;\n        };\n\n        const getItemScore = (d: any) => {\n            if (!data.positions[vc.ownId]) {\n                return 1;\n            }\n            const pos = data.getItemPos(d);\n            const collIds = Object.keys(data.positions);\n\n            if (data.mode === 'divide') {\n                return classifyPoint(data.positions[vc.ownId], pos);\n            } else {\n                return Math.min(\n                    ...collIds.map((collId) => classifyPoint(data.positions[collId], pos))\n                );\n            }\n        };\n\n        const getInside = () => {\n            if (!data.items) {\n                return null;\n            }\n            return data.items.filter(function (d) {\n                return getItemScore(d) <= 0;\n            });\n        };\n\n        const getOutside = () => {\n            if (!data.items) {\n                return null;\n            }\n            return data.items.filter(function (d) {\n                return getItemScore(d) > 0;\n            });\n        };\n\n        lasso.selectedItems = getInside;\n        lasso.notSelectedItems = getOutside;\n        lasso.possibleItems = getInside;\n        lasso.notPossibleItems = getOutside;\n        lasso.collaborationMode = (mode?: 'divide' | 'join') => {\n            if (mode) {\n                data.mode = mode;\n                return lasso;\n            } else {\n                return data.mode;\n            }\n        };\n\n        lasso.getItemPos = (cb: (item: D3Selection) => [number, number]) => {\n            data.getItemPos = cb;\n            return lasso;\n        };\n\n        lasso.on = (type: string, callback: () => void) => {\n            if (type === 'start') {\n                data.onStart = callback;\n            } else if (type === 'draw') {\n                data.onDraw = callback;\n            } else if (type === 'end') {\n                data.onEnd = callback;\n            } else {\n                console.error('Lasso type ', type, ' not defined.');\n            }\n            return lasso;\n        };\n\n        return lasso;\n    }\n\n    static mouse(node: HTMLElement): [number, number] {\n        const coords = (window as any)['d3'].mouse(node);\n        return [coords[0] - window.scrollX, coords[1] - window.scrollY];\n    }\n\n    static random(leaderId: string) {\n        // string to int hash from https://gist.github.com/hyamamoto/fd435505d29ebfa3d9716fd2be8d42f0.\n        let seed = Array.from(leaderId).reduce(\n            (s, c) => (Math.imul(31, s) + c.charCodeAt(0)) | 0,\n            0\n        );\n        return () => {\n            // Bad but seeded random function\n            const x = Math.sin(seed++) * 10000;\n            return x - Math.floor(x);\n        };\n    }\n\n    // From https://gist.github.com/0x263b/2bdd90886c2036a1ad5bcf06d6e6fb37\n    static stringToHex(string: string) {\n        let hash = 0;\n        if (string.length === 0) return '#000000';\n        for (let i = 0; i < string.length; i++) {\n            hash = string.charCodeAt(i) + ((hash << 5) - hash);\n            hash = hash & hash;\n        }\n        let color = '#';\n        for (let i = 0; i < 3; i++) {\n            const value = (hash >> (i * 8)) & 255;\n            color += ('00' + value.toString(16)).substr(-2);\n        }\n        return color;\n    }\n}\n\n// Adapted from D3.js\nfunction point(event: MouseEvent | TouchEvent) {\n    const node = event.target as SVGElement;\n    const svg = node.ownerSVGElement || node;\n\n    const position = event instanceof MouseEvent ? event : event.touches[0];\n    if (!position) {\n        console.warn(event);\n        return null;\n    }\n\n    if ((svg as any).createSVGPoint) {\n        let point = (svg as any).createSVGPoint();\n        point.x = position.clientX;\n        point.y = position.clientY;\n        point = point.matrixTransform((node as any).getScreenCTM().inverse());\n        return {x: point.x, y: point.y};\n    }\n\n    const rect = node.getBoundingClientRect();\n    return {\n        x: position.clientX - rect.left - node.clientLeft,\n        y: position.clientY - rect.top - node.clientTop,\n    };\n}\n\ninterface D3Selection {\n    append: (elementType: string) => D3Selection;\n    attr: (name: string, value?: string | number | ((d: any) => string | number)) => D3Selection;\n    call: (fct: () => void) => D3Selection;\n    each: (fct: (d: any) => void) => D3Selection;\n    filter: (fct: (d: any) => boolean) => D3Selection;\n    nodes: () => Element[];\n    on: (name: string, callback?: (event: any) => void) => D3Selection;\n    select: (name: string) => D3Selection;\n    selectAll: (name: string) => D3Selection;\n    style: (name: string, value?: string) => D3Selection;\n    remove: () => void;\n}\n\nfunction wrapFct(wrap: any, inner: any, fctName: string) {\n    wrap[fctName] = () => {\n        inner[fctName].apply(inner, arguments as any);\n        return wrap;\n    };\n}\n","import {Visconnect} from './visconnect';\nimport {VisConnectUtil} from './util';\nimport {StrippedEvent} from './listener';\n\nexport class VisConnectUi {\n    private cursorResetTimeout = 0;\n\n    constructor(private visconnect: Visconnect, private element: Element) {\n        this.addTemplate();\n        this.initiateCursors();\n\n        const protocol = this.visconnect.protocol;\n        protocol.communication.onConnectionCallback = this.updateConnections.bind(this);\n        protocol.onLoading = this.showLoadingScreen.bind(this);\n        protocol.onDoneLoading = this.hideLoadingScreen.bind(this);\n        protocol.communication.onLoading = this.showLoadingScreen.bind(this);\n        protocol.communication.onDoneLoading = this.hideLoadingScreen.bind(this);\n\n        this.showLoadingScreen('Setting up..');\n        this.updateConnections();\n    }\n\n    initiateCursors() {\n        this.element.addEventListener('mousemove', this.mouseMoved.bind(this));\n\n        const container = document.createElement('div');\n        container.id = 'visconnect-cursors';\n        document.body.appendChild(container);\n    }\n\n    getCursor(participant: string) {\n        const elementId = `visconnect-cursor-${participant}`;\n        let cursor = document.getElementById(elementId);\n        if (!cursor) {\n            const cursors = document.getElementById('visconnect-cursors')!;\n            cursor = document.createElement('div');\n            cursor.style.background = VisConnectUtil.stringToHex(participant);\n            cursor.style.width = '5px';\n            cursor.style.height = '5px';\n            cursor.style.position = 'absolute';\n            cursor.style.borderRadius = '3px';\n            cursor.style.pointerEvents = 'none';\n            cursor.id = elementId;\n            cursors.appendChild(cursor);\n        }\n        return cursor;\n    }\n\n    mouseMoved(originalEvent: Event) {\n        const event = originalEvent as MouseEvent & {collaboratorId: string};\n        const ownId = this.visconnect.protocol.communication.id;\n        const collaborator = event['collaboratorId'];\n        if (!collaborator || !ownId || ownId === collaborator) {\n            return;\n        }\n        const cursor = this.getCursor(collaborator);\n        cursor.style.left = `${event.clientX - 2}px`;\n        cursor.style.top = `${event.clientY - 2}px`;\n    }\n\n    eventCancelled(event: StrippedEvent) {\n        clearTimeout(this.cursorResetTimeout);\n        let target: HTMLElement = document.querySelector(event.target) || document.body;\n        target.style.setProperty('cursor', 'not-allowed', 'important');\n        this.cursorResetTimeout = window.setTimeout(() => {\n            target.style.removeProperty('cursor');\n        }, 50);\n    }\n\n    updateConnections() {\n        const connections = this.visconnect.protocol.communication.getNumberOfConnections();\n        const collaborators = connections - 1;\n\n        if (collaborators > 0) {\n            document.getElementById('visconnect-container')!.style.height = '70px';\n            document.getElementById('visconnect-collab-notice')!.style.display = 'inline';\n            document.getElementById('visconnect-collab-count')!.innerText = String(collaborators);\n        } else {\n            document.getElementById('visconnect-container')!.style.height = '50px';\n            document.getElementById('visconnect-collab-notice')!.style.display = 'none';\n        }\n    }\n\n    invite() {\n        const communication = this.visconnect.protocol.communication;\n        const leaderId = communication.leaderId;\n        const logo = document.getElementById('visconnect-logo')!;\n\n        if (!leaderId) {\n            const errorElement = document.getElementById('visconnect-not-ready')!;\n            logo.style.display = 'none';\n            errorElement.style.display = 'inline';\n\n            setTimeout(() => {\n                logo.style.display = 'block';\n                errorElement.style.display = 'none';\n            }, 1000);\n            return;\n        }\n\n        const url =\n            leaderId === communication.id\n                ? location.href + '?visconnectid=' + leaderId\n                : location.href;\n        copyToClipboard(url);\n\n        const inviteLinkCopied = document.getElementById('visconnect-link-copied')!;\n\n        logo.style.display = 'none';\n        inviteLinkCopied.style.display = 'inline';\n\n        setTimeout(() => {\n            logo.style.display = 'block';\n            inviteLinkCopied.style.display = 'none';\n        }, 2000);\n    }\n\n    showLoadingScreen(message: string) {\n        this.hideLoadingScreen();\n\n        const container = document.createElement('div');\n        container.id = 'visconnect-loadingscreen';\n        document.body.appendChild(container);\n\n        container.innerHTML = `\n<style>\n#background {\n    background: #f5f5f5;\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}\np {\n    text-align: center;\n    position: fixed;\n    top: 40%;\n    width: 100%;\n    left: 0;\n}\n</style>\n<div id=\"background\">\n    <p>\n        <b>VisConnect Loading:</b>\n        <br /><br />\n        ${message}\n    </p>\n</div>\n    `;\n    }\n\n    hideLoadingScreen() {\n        const loadingscreen = document.getElementById('visconnect-loadingscreen');\n        if (!loadingscreen) {\n            return;\n        }\n        loadingscreen.parentNode!.removeChild(loadingscreen);\n    }\n\n    addTemplate() {\n        const container = document.createElement('div');\n        container.id = 'visconnect-container';\n\n        container.innerHTML = `\n<a id=\"visconnect-invite\">\n    <!--<svg id=\"visconnect-logo\" width=\"50\" aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"link\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class=\"svg-inline&#45;&#45;fa fa-link fa-w-16 fa-2x\"><path fill=\"#fff\" d=\"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z\" class=\"\"></path></svg>-->\n    <svg id=\"visconnect-logo\" width=\"50\" version=\"1.1\" viewBox=\"0 0 55.55724 55.55724\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:cc=\"http://creativecommons.org/ns#\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\">\n        <g transform=\"translate(-15.5 -20.905)\">\n            <path d=\"m49.236 53.67s-6.0878-19.94-22.215-6.3478c-10.3 8.6812-12.464 16.499-6.203 23.516 7.1388 8.0014 16.301 3.8953 25.966-10.387\" fill=\"none\" stroke=\"#36b\" stroke-width=\"3\"/>\n            <path d=\"m36.975 38.666s14.57-21.929 26.543-12.407c11.973 9.5217 1.9956 17.866-2.3081 22.362-6.4915 6.7806-14.408 11.996-20.629 5.0494-3.8794-4.3324-4.3277-7.6462-4.3277-7.6462\" fill=\"none\" stroke=\"#36b\" stroke-width=\"3\"/>\n            <path d=\"m61.313 40.246h-3.6787l1.936 4.6647c0.13471 0.32337-0.01958 0.68598-0.32747 0.82317l-1.7049 0.73499c-0.31772 0.13713-0.67422-0.01936-0.80906-0.33321l-1.8397-4.4295-3.0052 3.0575c-0.40047 0.40736-1.05 0.09324-1.05-0.44098v-14.738c0-0.56252 0.69082-0.83679 1.0499-0.44098l9.8624 10.034c0.39783 0.38345 0.10406 1.0682-0.43342 1.0682z\" fill=\"#fff\" stroke=\"#000\"/>\n            <path d=\"m37.341 62.869h-3.6787l1.936 4.6647c0.13472 0.32337-0.01958 0.68598-0.32747 0.82317l-1.7049 0.73499c-0.31772 0.13713-0.67422-0.01936-0.80906-0.33321l-1.8397-4.4295-3.0052 3.0575c-0.40047 0.40736-1.05 0.09324-1.05-0.44098v-14.738c0-0.56253 0.69082-0.83679 1.0499-0.44098l9.8624 10.034c0.39783 0.38345 0.10406 1.0682-0.43342 1.0682z\" fill=\"#fff\" stroke=\"#000\"/>\n        </g>\n    </svg>\n</a>\n<span id=\"visconnect-link-copied\">Invite Link Copied.</span>\n<span id=\"visconnect-not-ready\">Not yet ready...</span>\n<span id=\"visconnect-collab-notice\"><span id=\"visconnect-collab-count\"></span> connected</span>\n\n<style>\n#visconnect-container {\n    position: fixed;\n    right: 10px;\n    bottom: 100px;\n    background: rgba(120,120,120,0.5);\n    border: 1px solid #ccc;\n    border-radius: 10px;\n    width: 80px;\n    height: 50px;\n    padding: 10px;\n    transition: height 500ms;\n    color: #fff;\n    font-family: 'Times New Roman',Times,serif;\n}\n#visconnect-container, #visconnect-container * {\n    box-sizing: content-box;\n}\n#visconnect-logo {\n    padding-left: 15px;\n    display: block;\n    background: transparent;\n}\n#visconnect-invite:hover {\n    cursor: pointer;\n}\n#visconnect-invite:hover #visconnect-logo path {\n    stroke: #000;\n} \n#visconnect-link-copied, #visconnect-collab-notice, #visconnect-not-ready {\n    display: none;\n}\n#visconnect-collab-notice {\n    font-size: 11pt;\n    position: relative;\n    top: 5px;\n    display: inline-block;\n    width: 100px;\n}\n</style>`;\n        document.body.appendChild(container);\n        document.getElementById('visconnect-invite')!.onclick = this.invite.bind(this);\n    }\n}\n\n// From https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\nconst copyToClipboard = (str: string) => {\n    const el = document.createElement('textarea');\n    el.value = str;\n    //console.log(str);\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    const selection = document.getSelection();\n    const selected = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : false;\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n    if (selected && selection) {\n        selection.removeAllRanges();\n        selection.addRange(selected);\n    }\n};\n","export interface StrippedEvent {\n    type: string;\n    target: string;\n    targetType: string;\n    timeStamp: number;\n    touches: {clientX: number; clientY: number}[];\n    collaboratorId: string;\n    [key: string]: string | number | {clientX: number; clientY: number}[];\n}\n\nexport class VcListener {\n    constructor(\n        private svg: Element,\n        private hearEvent: (e: StrippedEvent, event: Event) => void,\n        private customEvents?: string[],\n        private ignoreEvents?: string[]\n    ) {\n        this.addListenersToElementAndChildren(this.svg);\n    }\n\n    addListenersToElementAndChildren(element: Element) {\n        this.addListenersToElement(element);\n        for (const child of element.children) {\n            this.addListenersToElementAndChildren(child);\n        }\n    }\n\n    addListenersToElement(element: Element) {\n        const boundCapture = this.captureEvent(element).bind(this);\n\n        const custom = this.customEvents ? this.customEvents : [];\n        const eventTypes = [\n            'mousemove',\n            'mouseup',\n            'mousedown',\n            'touchmove',\n            'mouseenter',\n            'mouseout',\n            'mouseover',\n            'mouseleave',\n            'click',\n            'dblclick',\n            'touchstart',\n            'touchend',\n            'selectstart',\n            'dragstart',\n        ]\n            .filter(\n                (type) =>\n                    !this.ignoreEvents ||\n                    (this.ignoreEvents[0] !== 'all' && !this.ignoreEvents.includes(type))\n            )\n            .concat(custom)\n            .concat(['brush-message']);\n\n        for (const type of eventTypes) {\n            element.addEventListener(type, boundCapture);\n        }\n\n        // Add listeners to future child elements.\n        const appendBackup = element.appendChild;\n        const insertBeforeBackup = element.insertBefore;\n        const that = this;\n\n        element.appendChild = function <T extends Node>(newChild: T) {\n            that.addListenersToElement((newChild as unknown) as Element);\n            return appendBackup.call(this, newChild) as T;\n        };\n\n        element.insertBefore = function <T extends Node>(newChild: T, nextChild: Node | null) {\n            that.addListenersToElement((newChild as unknown) as Element);\n            return insertBeforeBackup.call(this, newChild, nextChild) as T;\n        };\n    }\n\n    captureEvent(element: Element) {\n        return (e: MouseEvent | TouchEvent | DragEvent | Event) => {\n            if (e.target !== element) {\n                // Only capture for the correct target.\n                return;\n            }\n            if ((e as any)['visconnect-received']) {\n                // Don't broadcast events that have been received from other clients.\n                return;\n            }\n            const eventObj = this.getStrippedEvent(e);\n            //this.connection.broadcastEvent(eventObj);\n            this.hearEvent(eventObj, e);\n        };\n    }\n\n    getStrippedEvent(e: MouseEvent | TouchEvent | Event | CustomEvent) {\n        let obj: StrippedEvent = {\n            type: '',\n            target: '',\n            targetType: '',\n            touches: [],\n            timeStamp: -1,\n            collaboratorId: '',\n        };\n        for (const key in e) {\n            const val = (e as any)[key];\n            if (typeof val !== 'object' && typeof val !== 'function') {\n                obj[key] = val;\n            }\n        }\n        if (obj.clientX) {\n            obj.clientX = (obj.clientX as number) + window.scrollX;\n        }\n        if (obj.x) {\n            obj.x = (obj.x as number) + window.scrollX;\n        }\n        if (obj.clientY) {\n            obj.clientY = (obj.clientY as number) + window.scrollY;\n        }\n        if (obj.y) {\n            obj.y = (obj.y as number) + window.scrollY;\n        }\n\n        if (window.TouchEvent && e instanceof TouchEvent && e.touches && e.touches.length) {\n            for (const touch of e.touches) {\n                obj.touches.push({\n                    clientX: touch.clientX + window.scrollX,\n                    clientY: touch.clientY + window.scrollX,\n                });\n            }\n        }\n        if ((e as CustomEvent).detail) {\n            obj.detail = (e as CustomEvent).detail;\n        }\n        const target = this.getElementSelector(e.target as Element);\n        if (target) {\n            obj.target = target;\n            obj.targetType = (e.target as Element).tagName.toLowerCase();\n        }\n        return obj;\n    }\n\n    getElementSelector(element: Element | null): string | null {\n        if (!element) {\n            return null;\n        }\n        if (element === document.body) {\n            return 'body';\n        }\n        const parent = element.parentNode;\n        if (!parent) {\n            return null;\n        }\n\n        const index = Array.from(parent.children).indexOf(element);\n        const type = element.tagName;\n\n        return this.getElementSelector(parent as Element) + ` > ${type}:nth-child(${index + 1})`;\n    }\n}\n","import {StrippedEvent} from './listener';\n\nexport function delayAddEventListener() {\n    // The visualization's event listeners need to be called after VisConnect's event listeners.\n    // For this reason, we delay calling event listeners that are added before VisConnect is started.\n    (Element as any).prototype['addEventListenerBackup'] = Element.prototype.addEventListener;\n    Element.prototype.addEventListener = function (\n        this: Element,\n        eventName: string,\n        callback: () => void\n    ) {\n        //console.log('doing a delayed execution on ', eventName, this);\n        const that = this;\n        setTimeout(function () {\n            (Element as any).prototype['addEventListenerBackup'].call(that, eventName, callback);\n        }, 110);\n    } as any;\n\n    // After the visualization code is run, reset the addEventListener function to its normal functionality, and start\n    // VisConnect.\n    return new Promise<void>((resolve) => {\n        window.setTimeout(() => {\n            Element.prototype.addEventListener = (Element as any).prototype[\n                'addEventListenerBackup'\n            ];\n            resolve();\n        }, 100);\n    });\n}\n\nexport function disableStopPropagation() {\n    // Prevent d3 from blocking VisConnect and other code to have access to events.\n    (Event as any).prototype['stopImmediatePropagationBackup'] =\n        Event.prototype.stopImmediatePropagation;\n    Event.prototype.stopImmediatePropagation = () => {};\n}\n\nexport function stopPropagation(event: Event) {\n    (event as Event & {stopImmediatePropagationBackup: () => void})[\n        'stopImmediatePropagationBackup'\n    ]();\n    event.stopPropagation();\n}\n\nexport function recreateEvent(eventObject: StrippedEvent, target: Element): Event {\n    const targetSelector = eventObject.target;\n    let e: Event;\n    if (eventObject.type.substr(0, 5) === 'touch') {\n        try {\n            e = document.createEvent('TouchEvent');\n            e.initEvent(eventObject.type, true, false);\n            for (const prop in eventObject) {\n                if (prop !== 'isTrusted' && eventObject.hasOwnProperty(prop)) {\n                    Object.defineProperty(e, prop, {\n                        writable: true,\n                        value: eventObject[prop],\n                    });\n                }\n            }\n        } catch (error) {\n            // Touch probably not supported.\n            let newType = 'mousemove';\n            if (eventObject.type === 'touchstart') {\n                newType = 'mousedown';\n            } else if (eventObject.type === 'touchend') {\n                newType = 'mouseup';\n            }\n            eventObject.type = newType;\n            if (eventObject.touches[0]) {\n                eventObject.clientX = eventObject.touches[0].clientX;\n                eventObject.clientY = eventObject.touches[0].clientY;\n            }\n\n            e = new MouseEvent(eventObject.type, eventObject as any);\n        }\n        //e = new TouchEvent(eventObject.type, eventObject as any);\n    } else if (eventObject.type.substr(0, 5) === 'mouse' || eventObject.type === 'click') {\n        e = new MouseEvent(eventObject.type, eventObject as any);\n    } else if (eventObject.type.substr(0, 4) === 'drag') {\n        e = new DragEvent(eventObject.type, eventObject as any);\n    } else {\n        e = new Event(eventObject.type, eventObject as any);\n    }\n    if (eventObject.detail) {\n        Object.defineProperty(e, 'detail', {\n            writable: true,\n            value: eventObject.detail,\n        });\n    }\n\n    if (targetSelector) {\n        let newTarget: Element | null = document.querySelector(targetSelector);\n        if (!newTarget) {\n            console.error('element not found', targetSelector);\n            //throw new Error('element not found');\n            newTarget = document.body;\n        }\n        target = newTarget;\n    }\n    Object.defineProperty(e, 'target', {\n        writable: true,\n        value: target,\n    });\n    Object.defineProperty(e, 'view', {\n        writable: true,\n        value: window,\n    });\n    return e;\n}\n","export function isFunction(x: any): x is Function {\n  return typeof x === 'function';\n}\n","let _enable_super_gross_mode_that_will_cause_bad_things = false;\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport const config = {\n  /**\n   * The promise constructor used by default for methods such as\n   * {@link toPromise} and {@link forEach}\n   */\n  Promise: undefined as PromiseConstructorLike,\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n   * FOR MIGRATION REASONS.\n   */\n  set useDeprecatedSynchronousErrorHandling(value: boolean) {\n    if (value) {\n      const error = new Error();\n      console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n    } else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n      console.log('RxJS: Back to a better error behavior. Thank you. <3');\n    }\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  },\n};\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nexport function hostReportError(err: any) {\n  setTimeout(() => { throw err; }, 0);\n}","import { Observer } from './types';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nexport const empty: Observer<any> = {\n  closed: true,\n  next(value: any): void { /* noop */},\n  error(err: any): void {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError(err);\n    }\n  },\n  complete(): void { /*noop*/ }\n};\n","export const isArray = (() => Array.isArray || (<T>(x: any): x is T[] => x && typeof x.length === 'number'))();\n","export function isObject(x: any): x is Object {\n  return x !== null && typeof x === 'object';\n}\n","export interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  new(errors: any[]): UnsubscriptionError;\n}\n\nconst UnsubscriptionErrorImpl = (() => {\n  function UnsubscriptionErrorImpl(this: any, errors: any[]) {\n    Error.call(this);\n    this.message = errors ?\n      `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}` : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n  }\n\n  UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n\n  return UnsubscriptionErrorImpl;\n})();\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = UnsubscriptionErrorImpl as any;","import { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic } from './types';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport class Subscription implements SubscriptionLike {\n  /** @nocollapse */\n  public static EMPTY: Subscription = (function(empty: any) {\n    empty.closed = true;\n    return empty;\n  }(new Subscription()));\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   * @type {boolean}\n   */\n  public closed: boolean = false;\n\n  /** @internal */\n  protected _parentOrParents: Subscription | Subscription[] = null;\n  /** @internal */\n  private _subscriptions: SubscriptionLike[] = null;\n\n  /**\n   * @param {function(): void} [unsubscribe] A function describing how to\n   * perform the disposal of resources when the `unsubscribe` method is called.\n   */\n  constructor(unsubscribe?: () => void) {\n    if (unsubscribe) {\n      (<any> this)._unsubscribe = unsubscribe;\n    }\n  }\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   * @return {void}\n   */\n  unsubscribe(): void {\n    let errors: any[];\n\n    if (this.closed) {\n      return;\n    }\n\n    let { _parentOrParents, _unsubscribe, _subscriptions } = (<any> this);\n\n    this.closed = true;\n    this._parentOrParents = null;\n    // null out _subscriptions first so any child subscriptions that attempt\n    // to remove themselves from this subscription will noop\n    this._subscriptions = null;\n\n    if (_parentOrParents instanceof Subscription) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (let index = 0; index < _parentOrParents.length; ++index) {\n        const parent = _parentOrParents[index];\n        parent.remove(this);\n      }\n    }\n\n    if (isFunction(_unsubscribe)) {\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n\n    if (isArray(_subscriptions)) {\n      let index = -1;\n      let len = _subscriptions.length;\n\n      while (++index < len) {\n        const sub = _subscriptions[index];\n        if (isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n            if (e instanceof UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n\n    if (errors) {\n      throw new UnsubscriptionError(errors);\n    }\n  }\n\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription. Can also be used to add a child subscription.\n   *\n   * If the tear down being added is a subscription that is already\n   * unsubscribed, is the same reference `add` is being called on, or is\n   * `Subscription.EMPTY`, it will not be added.\n   *\n   * If this subscription is already in an `closed` state, the passed\n   * tear down logic will be executed immediately.\n   *\n   * When a parent subscription is unsubscribed, any child subscriptions that were added to it are also unsubscribed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n  add(teardown: TeardownLogic): Subscription {\n    let subscription = (<Subscription>teardown);\n\n    if (!(<any>teardown)) {\n      return Subscription.EMPTY;\n    }\n\n    switch (typeof teardown) {\n      case 'function':\n        subscription = new Subscription(<(() => void)>teardown);\n      case 'object':\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n          // This also covers the case where `subscription` is `Subscription.EMPTY`, which is always in `closed` state.\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription)) {\n          const tmp = subscription;\n          subscription = new Subscription();\n          subscription._subscriptions = [tmp];\n        }\n        break;\n      default: {\n        throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n      }\n    }\n\n    // Add `this` as parent of `subscription` if that's not already the case.\n    let { _parentOrParents } = subscription;\n    if (_parentOrParents === null) {\n      // If we don't have a parent, then set `subscription._parents` to\n      // the `this`, which is the common case that we optimize for.\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription) {\n      if (_parentOrParents === this) {\n        // The `subscription` already has `this` as a parent.\n        return subscription;\n      }\n      // If there's already one parent, but not multiple, allocate an\n      // Array to store the rest of the parent Subscriptions.\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      // Only add `this` to the _parentOrParents list if it's not already there.\n      _parentOrParents.push(this);\n    } else {\n      // The `subscription` already has `this` as a parent.\n      return subscription;\n    }\n\n    // Optimize for the common case when adding the first subscription.\n    const subscriptions = this._subscriptions;\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n\n    return subscription;\n  }\n\n  /**\n   * Removes a Subscription from the internal list of subscriptions that will\n   * unsubscribe during the unsubscribe process of this Subscription.\n   * @param {Subscription} subscription The subscription to remove.\n   * @return {void}\n   */\n  remove(subscription: Subscription): void {\n    const subscriptions = this._subscriptions;\n    if (subscriptions) {\n      const subscriptionIndex = subscriptions.indexOf(subscription);\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  }\n}\n\nfunction flattenUnsubscriptionErrors(errors: any[]) {\n return errors.reduce((errs, err) => errs.concat((err instanceof UnsubscriptionError) ? err.errors : err), []);\n}\n","/** @deprecated do not use, this is no longer checked by RxJS internals */\nexport const rxSubscriber = (() =>\n  typeof Symbol === 'function'\n    ? Symbol('rxSubscriber')\n    : '@@rxSubscriber_' + Math.random())();\n\n/**\n * @deprecated use rxSubscriber instead\n */\nexport const $$rxSubscriber = rxSubscriber;\n","import { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Observer, PartialObserver, TeardownLogic } from './types';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n\n  [rxSubscriberSymbol]() { return this; }\n\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @nocollapse\n   */\n  static create<T>(next?: (x?: T) => void,\n                   error?: (e?: any) => void,\n                   complete?: () => void): Subscriber<T> {\n    const subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  }\n\n  /** @internal */ syncErrorValue: any = null;\n  /** @internal */ syncErrorThrown: boolean = false;\n  /** @internal */ syncErrorThrowable: boolean = false;\n\n  protected isStopped: boolean = false;\n  protected destination: PartialObserver<any> | Subscriber<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n   * defined Observer or a `next` callback function.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   */\n  constructor(destinationOrNext?: PartialObserver<any> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    switch (arguments.length) {\n      case 0:\n        this.destination = emptyObserver;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          this.destination = emptyObserver;\n          break;\n        }\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            this.destination = destinationOrNext;\n            destinationOrNext.add(this);\n          } else {\n            this.syncErrorThrowable = true;\n            this.destination = new SafeSubscriber<T>(this, <PartialObserver<any>> destinationOrNext);\n          }\n          break;\n        }\n      default:\n        this.syncErrorThrowable = true;\n        this.destination = new SafeSubscriber<T>(this, <((value: T) => void)> destinationOrNext, error, complete);\n        break;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param {T} [value] The `next` value.\n   * @return {void}\n   */\n  next(value?: T): void {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param {any} [err] The `error` exception.\n   * @return {void}\n   */\n  error(err?: any): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   * @return {void}\n   */\n  complete(): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    super.unsubscribe();\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.destination.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.destination.complete();\n    this.unsubscribe();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribeAndRecycle(): Subscriber<T> {\n    const {  _parentOrParents } = this;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SafeSubscriber<T> extends Subscriber<T> {\n\n  private _context: any;\n\n  constructor(private _parentSubscriber: Subscriber<T>,\n              observerOrNext?: PartialObserver<T> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    let next: ((value: T) => void);\n    let context: any = this;\n\n    if (isFunction(observerOrNext)) {\n      next = (<((value: T) => void)> observerOrNext);\n    } else if (observerOrNext) {\n      next = (<PartialObserver<T>> observerOrNext).next;\n      error = (<PartialObserver<T>> observerOrNext).error;\n      complete = (<PartialObserver<T>> observerOrNext).complete;\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n        if (isFunction(context.unsubscribe)) {\n          this.add(<() => void> context.unsubscribe.bind(context));\n        }\n        context.unsubscribe = this.unsubscribe.bind(this);\n      }\n    }\n\n    this._context = context;\n    this._next = next;\n    this._error = error;\n    this._complete = complete;\n  }\n\n  next(value?: T): void {\n    if (!this.isStopped && this._next) {\n      const { _parentSubscriber } = this;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  error(err?: any): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      const { useDeprecatedSynchronousErrorHandling } = config;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  }\n\n  complete(): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      if (this._complete) {\n        const wrappedComplete = () => this._complete.call(this._context);\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  private __tryOrUnsub(fn: Function, value?: any): void {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  }\n\n  private __tryOrSetError(parent: Subscriber<T>, fn: Function, value?: any): boolean {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _unsubscribe(): void {\n    const { _parentSubscriber } = this;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  }\n}\n","import { Subscriber } from '../Subscriber';\nimport { Subject } from '../Subject';\n\n/**\n * Determines whether the ErrorObserver is closed or stopped or has a\n * destination that is closed or stopped - in which case errors will\n * need to be reported via a different mechanism.\n * @param observer the observer\n */\nexport function canReportError(observer: Subscriber<any> | Subject<any>): boolean {\n  while (observer) {\n    const { closed, destination, isStopped } = observer as any;\n    if (closed || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n  return true;\n}\n","import { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nimport { PartialObserver } from '../types';\n\nexport function toSubscriber<T>(\n  nextOrObserver?: PartialObserver<T> | ((value: T) => void),\n  error?: (error: any) => void,\n  complete?: () => void): Subscriber<T> {\n\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber) {\n      return (<Subscriber<T>> nextOrObserver);\n    }\n\n    if (nextOrObserver[rxSubscriberSymbol]) {\n      return nextOrObserver[rxSubscriberSymbol]();\n    }\n  }\n\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber(emptyObserver);\n  }\n\n  return new Subscriber(nextOrObserver, error, complete);\n}\n","/** Symbol.observable addition */\n/* Note: This will add Symbol.observable globally for all TypeScript users,\n  however, we are no longer polyfilling Symbol.observable */\ndeclare global {\n  interface SymbolConstructor {\n    readonly observable: symbol;\n  }\n}\n\n/** Symbol.observable or a string \"@@observable\". Used for interop */\nexport const observable = (() => typeof Symbol === 'function' && Symbol.observable || '@@observable')();\n","/* tslint:disable:no-empty */\nexport function noop() { }\n","import { noop } from './noop';\nimport { UnaryFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function pipe<T>(): UnaryFunction<T, T>;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>, ...fns: UnaryFunction<any, any>[]): UnaryFunction<T, {}>;\n/* tslint:enable:max-line-length */\n\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (!fns) {\n    return noop as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n","import { Operator } from './Operator';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, PartialObserver, Subscribable } from './types';\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { iif } from './observable/iif';\nimport { throwError } from './observable/throwError';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport class Observable<T> implements Subscribable<T> {\n\n  /** Internal implementation detail, do not use directly. */\n  public _isScalar: boolean = false;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  source: Observable<any>;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  operator: Operator<any, T>;\n\n  /**\n   * @constructor\n   * @param {Function} subscribe the function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new cold Observable by calling the Observable constructor\n   * @static true\n   * @owner Observable\n   * @method create\n   * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n   * @return {Observable} a new cold observable\n   * @nocollapse\n   * @deprecated use new Observable() instead\n   */\n  static create: Function = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  }\n\n  /**\n   * Creates a new Observable, with this Observable as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @method lift\n   * @param {Operator} operator the operator defining the operation to take on the observable\n   * @return {Observable} a new observable with the Operator applied\n   */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observer?: PartialObserver<T>): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: null | undefined, error: null | undefined, complete: () => void): Subscription;\n  /** @deprecated Use an observer instead of an error callback */\n  subscribe(next: null | undefined, error: (error: any) => void, complete?: () => void): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: (value: T) => void, error: null | undefined, complete: () => void): Subscription;\n  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided, all errors will\n   * be left uncaught.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of Observer,\n   * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * ## Example\n   * ### Subscribe with an Observer\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Subscribe with functions\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Cancel a subscription\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe(\n   *   num => console.log(num),\n   *   undefined,\n   *   () => {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * );\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // \"unsubscribed!\" after 2.5s\n   * ```\n   *\n   * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n   *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n   *  Observable.\n   * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n   *  the error will be thrown as unhandled.\n   * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n   * @return {ISubscription} a subscription reference to the registered handlers\n   * @method subscribe\n   */\n  subscribe(observerOrNext?: PartialObserver<T> | ((value: T) => void),\n            error?: (error: any) => void,\n            complete?: () => void): Subscription {\n\n    const { operator } = this;\n    const sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(\n        this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n        this._subscribe(sink) :\n        this._trySubscribe(sink)\n      );\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  }\n\n  /**\n   * @method forEach\n   * @param {Function} next a handler for each value emitted by the observable\n   * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n   * @return {Promise} a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   */\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      // Must be declared in a separate statement to avoid a ReferenceError when\n      // accessing subscription below in the closure due to Temporal Dead Zone.\n      let subscription: Subscription;\n      subscription = this.subscribe((value) => {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    }) as Promise<void>;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    const { source } = this;\n    return source && source.subscribe(subscriber);\n  }\n\n  // `if` and `throw` are special snow flakes, the compiler sees them as reserved words. Deprecated in\n  // favor of iif and throwError functions.\n  /**\n   * @nocollapse\n   * @deprecated In favor of iif creation function: import { iif } from 'rxjs';\n   */\n  static if: typeof iif;\n  /**\n   * @nocollapse\n   * @deprecated In favor of throwError creation function: import { throwError } from 'rxjs';\n   */\n  static throw: typeof throwError;\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @method Symbol.observable\n   * @return {Observable} this instance of the observable\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>): Observable<D>;\n  pipe<A, B, C, D, E>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>): Observable<E>;\n  pipe<A, B, C, D, E, F>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>, ...operations: OperatorFunction<any, any>[]): Observable<{}>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   * @method pipe\n   * @return {Observable} the Observable result of all of the operators having\n   * been called in the order they were passed in.\n   *\n   * ### Example\n   * ```ts\n   * import { interval } from 'rxjs';\n   * import { map, filter, scan } from 'rxjs/operators';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x))\n   * ```\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    if (operations.length === 0) {\n      return this as any;\n    }\n\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  toPromise<T>(this: Observable<T>): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: typeof Promise): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: PromiseConstructorLike): Promise<T>;\n  /* tslint:enable:max-line-length */\n\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: any;\n      this.subscribe((x: T) => value = x, (err: any) => reject(err), () => resolve(value));\n    }) as Promise<T>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}\n","export interface ObjectUnsubscribedError extends Error {\n}\n\nexport interface ObjectUnsubscribedErrorCtor {\n  new(): ObjectUnsubscribedError;\n}\n\nconst ObjectUnsubscribedErrorImpl = (() => {\n  function ObjectUnsubscribedErrorImpl(this: any) {\n    Error.call(this);\n    this.message = 'object unsubscribed';\n    this.name = 'ObjectUnsubscribedError';\n    return this;\n  }\n\n  ObjectUnsubscribedErrorImpl.prototype = Object.create(Error.prototype);\n\n  return ObjectUnsubscribedErrorImpl;\n})();\n\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nexport const ObjectUnsubscribedError: ObjectUnsubscribedErrorCtor = ObjectUnsubscribedErrorImpl as any;","import { Subject } from './Subject';\nimport { Observer } from './types';\nimport { Subscription } from './Subscription';\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SubjectSubscription<T> extends Subscription {\n  closed: boolean = false;\n\n  constructor(public subject: Subject<T>, public subscriber: Observer<T>) {\n    super();\n  }\n\n  unsubscribe() {\n    if (this.closed) {\n      return;\n    }\n\n    this.closed = true;\n\n    const subject = this.subject;\n    const observers = subject.observers;\n\n    this.subject = null;\n\n    if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n      return;\n    }\n\n    const subscriberIndex = observers.indexOf(this.subscriber);\n\n    if (subscriberIndex !== -1) {\n      observers.splice(subscriberIndex, 1);\n    }\n  }\n}\n","import { Operator } from './Operator';\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { Observer, SubscriptionLike, TeardownLogic } from './types';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\n\n/**\n * @class SubjectSubscriber<T>\n */\nexport class SubjectSubscriber<T> extends Subscriber<T> {\n  constructor(protected destination: Subject<T>) {\n    super(destination);\n  }\n}\n\n/**\n * A Subject is a special type of Observable that allows values to be\n * multicasted to many Observers. Subjects are like EventEmitters.\n *\n * Every Subject is an Observable and an Observer. You can subscribe to a\n * Subject, and you can call next to feed values as well as error and complete.\n *\n * @class Subject<T>\n */\nexport class Subject<T> extends Observable<T> implements SubscriptionLike {\n\n  [rxSubscriberSymbol]() {\n    return new SubjectSubscriber(this);\n  }\n\n  observers: Observer<T>[] = [];\n\n  closed = false;\n\n  isStopped = false;\n\n  hasError = false;\n\n  thrownError: any = null;\n\n  constructor() {\n    super();\n  }\n\n  /**@nocollapse\n   * @deprecated use new Subject() instead\n  */\n  static create: Function = <T>(destination: Observer<T>, source: Observable<T>): AnonymousSubject<T> => {\n    return new AnonymousSubject<T>(destination, source);\n  }\n\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const subject = new AnonymousSubject(this, this);\n    subject.operator = <any>operator;\n    return <any>subject;\n  }\n\n  next(value?: T) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    if (!this.isStopped) {\n      const { observers } = this;\n      const len = observers.length;\n      const copy = observers.slice();\n      for (let i = 0; i < len; i++) {\n        copy[i].next(value);\n      }\n    }\n  }\n\n  error(err: any) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.hasError = true;\n    this.thrownError = err;\n    this.isStopped = true;\n    const { observers } = this;\n    const len = observers.length;\n    const copy = observers.slice();\n    for (let i = 0; i < len; i++) {\n      copy[i].error(err);\n    }\n    this.observers.length = 0;\n  }\n\n  complete() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.isStopped = true;\n    const { observers } = this;\n    const len = observers.length;\n    const copy = observers.slice();\n    for (let i = 0; i < len; i++) {\n      copy[i].complete();\n    }\n    this.observers.length = 0;\n  }\n\n  unsubscribe() {\n    this.isStopped = true;\n    this.closed = true;\n    this.observers = null;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(subscriber: Subscriber<T>): TeardownLogic {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return super._trySubscribe(subscriber);\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>): Subscription {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscriber.complete();\n      return Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      return new SubjectSubscription(this, subscriber);\n    }\n  }\n\n  /**\n   * Creates a new Observable with this Subject as the source. You can do this\n   * to create customize Observer-side logic of the Subject and conceal it from\n   * code that uses the Observable.\n   * @return {Observable} Observable that the Subject casts to\n   */\n  asObservable(): Observable<T> {\n    const observable = new Observable<T>();\n    (<any>observable).source = this;\n    return observable;\n  }\n}\n\n/**\n * @class AnonymousSubject<T>\n */\nexport class AnonymousSubject<T> extends Subject<T> {\n  constructor(protected destination?: Observer<T>, source?: Observable<T>) {\n    super();\n    this.source = source;\n  }\n\n  next(value: T) {\n    const { destination } = this;\n    if (destination && destination.next) {\n      destination.next(value);\n    }\n  }\n\n  error(err: any) {\n    const { destination } = this;\n    if (destination && destination.error) {\n      this.destination.error(err);\n    }\n  }\n\n  complete() {\n    const { destination } = this;\n    if (destination && destination.complete) {\n      this.destination.complete();\n    }\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<T>): Subscription {\n    const { source } = this;\n    if (source) {\n      return this.source.subscribe(subscriber);\n    } else {\n      return Subscription.EMPTY;\n    }\n  }\n}\n","import {Subject} from 'rxjs';\nimport {VcMessage} from './communication';\n\nexport interface PeerjsConnectionI {\n    on: (id: string, callback: (data: any) => void) => void;\n    peer: string;\n    send: (msg: {}) => void;\n}\n\nexport interface VcConnection {\n    send(message: {}): void;\n    getPeer(): string;\n    messages: Subject<any>;\n    open(): Promise<void>;\n}\n\nexport class PeerjsConnection implements VcConnection {\n    messages = new Subject<VcMessage>();\n\n    constructor(private connection: PeerjsConnectionI) {\n        this.connection.on('data', (message) => {\n            this.receiveMessage(message);\n        });\n    }\n\n    send(message: VcMessage) {\n        // The testdelay URL flag can be used to test bad network conditions.\n        if (location.href.includes('testdelay')) {\n            setTimeout(() => this.connection.send(message), Math.round(Math.random() * 100));\n        } else {\n            this.connection.send(message);\n        }\n    }\n\n    getPeer() {\n        return this.connection.peer;\n    }\n\n    private receiveMessage(message: VcMessage) {\n        this.messages.next(message);\n    }\n\n    open() {\n        return new Promise<void>((resolve) => {\n            this.connection.on('open', resolve);\n        });\n    }\n}\n","import {PeerjsConnection, PeerjsConnectionI} from './peerjs-connection';\n\ndeclare var Peer: any;\n\nexport interface VcNetwork {\n    init(\n        id: string,\n        onOpen: () => void,\n        onConnection: (connection: PeerjsConnection) => void,\n        onDisconnection: () => void\n    ): void;\n    getId(): string;\n    connect(peerId: string): Promise<PeerjsConnection>;\n}\n\nexport class PeerjsNetwork implements VcNetwork {\n    private peer: any;\n    private onOpen: () => void = () => 0;\n\n    init(\n        id: string,\n        onOpen: () => void,\n        onConnection: (connection: PeerjsConnection) => void,\n        onDisconnection: () => void\n    ) {\n        this.onOpen = onOpen;\n\n        this.peer = new Peer(id, {\n            host: 'michaschwab.de',\n            port: 9099,\n            secure: true,\n            path: '/visconnect',\n            config: {\n                iceServers: [\n                    {urls: 'stun:stun.l.google.com:19302'},\n                    {\n                        urls: 'turn:numb.viagenie.ca',\n                        credential: \"a/j'/9CmxTCa\",\n                        username: 'saffo.d@husky.neu.edu',\n                    },\n                ],\n            },\n        });\n\n        if (this.peer._open) {\n            this.onOpen(); // In case it was done too fast.\n        } else {\n            this.peer.on('open', this.onOpen);\n        }\n\n        this.peer.on('connection', (connection: PeerjsConnectionI) => {\n            onConnection(new PeerjsConnection(connection));\n        });\n\n        this.peer.on('disconnected', () => {\n            onDisconnection();\n        });\n\n        window.addEventListener('beforeunload', () => onDisconnection());\n    }\n\n    getId(): string {\n        return this.peer.id;\n    }\n\n    connect(peerId: string): Promise<PeerjsConnection> {\n        return new Promise<PeerjsConnection>(async (resolve) => {\n            const conn: PeerjsConnectionI = this.peer.connect(peerId);\n            const connection = new PeerjsConnection(conn);\n\n            await connection.open();\n            resolve(connection);\n        });\n    }\n}\n","import {VcEvent} from './visconnect';\nimport {VcNetwork, PeerjsNetwork} from './peerjs-network';\nimport {VcConnection} from './peerjs-connection';\n\n// This file should know all the message types and create the messages\nexport interface VcCommunicationI {\n    id: string;\n    getId: () => string;\n    broadcastEvent: (e: VcEvent) => void;\n    requestLock: (selector: string) => boolean;\n    changeLockOwner: (selector: string, owner: string, seqNum: number) => void;\n    getNumberOfConnections: () => number;\n    leaderId: string;\n    onConnectionCallback: () => void;\n    init: () => void;\n    onLoading?: (message: string) => void;\n    onDoneLoading?: () => void;\n}\n\nexport interface VcCommunicationConstructorData {\n    leaderId: string;\n    ownId: string;\n    onEventReceived: (e: VcEvent[], sender: string, catchup?: boolean) => void;\n    onNewLockOwner: (selector: string, owner: string, seqNum: number) => void;\n    getPastEvents: () => VcEvent[];\n    onLockRequested: (selector: string, requester: string) => void;\n    onOpenCallback: () => void;\n}\n\nexport interface VcCommunicationConstructor {\n    new (data: VcCommunicationConstructorData): VcCommunicationI;\n}\n\nexport class VcCommunication implements VcCommunicationI {\n    private peer: VcNetwork;\n    private connections: VcConnection[] = [];\n    private leaderConnection?: VcConnection;\n    private peers: string[] = [];\n    onConnectionCallback = () => {};\n    public id = '';\n\n    private eventsMsg?: VcEventsMessage;\n    private lastEventsMessageTime = -1;\n    private throttleTimeout = -1;\n\n    public leaderId: string;\n    private readonly onEventReceived: (e: VcEvent[], sender: string, catchup?: boolean) => void;\n    private readonly onNewLockOwner: (selector: string, owner: string, seqNum: number) => void;\n    private readonly getPastEvents: () => VcEvent[];\n    private readonly onLockRequested: (selector: string, requester: string) => void;\n    private readonly onOpenCallback: () => void;\n    onLoading?: (message: string) => void;\n    onDoneLoading?: () => void;\n\n    constructor(data: VcCommunicationConstructorData) {\n        this.leaderId = data.leaderId;\n        this.id = data.ownId;\n        this.onEventReceived = data.onEventReceived;\n        this.onNewLockOwner = data.onNewLockOwner;\n        this.getPastEvents = data.getPastEvents;\n        this.onLockRequested = data.onLockRequested;\n        this.onOpenCallback = data.onOpenCallback;\n\n        this.peer = new PeerjsNetwork();\n    }\n\n    init() {\n        this.peer.init(\n            this.id,\n            this.onOpen.bind(this),\n            this.onConnected.bind(this),\n            this.onDisconnected.bind(this)\n        );\n    }\n\n    /**\n     * Requests all clients to vote to agree that this client gets the lock on the element.\n     */\n    requestLock(targetSelector: string) {\n        if (!this.id) {\n            return false;\n        }\n        if (!this.leaderConnection && this.id !== this.leaderId) {\n            return false;\n        }\n\n        const msg: LockRequestMessage = {\n            type: VC_MESSAGE_TYPE.LOCK_REQUESTED,\n            targetSelector,\n            requester: this.id,\n            sender: this.id,\n        };\n\n        if (this.id === this.leaderId) {\n            // Ask itself, the leader, for permission.\n            this.receiveMessage(msg);\n        } else {\n            // Ask the leader for permission.\n            this.leaderConnection!.send(msg);\n        }\n        return true;\n    }\n\n    /**\n     * This message is sent by the leader to inform clients that an element's lock owner has changed.\n     */\n    changeLockOwner(targetSelector: string, owner: string, seqNum: number) {\n        const msg: LockOwnerChangedMessage = {\n            type: VC_MESSAGE_TYPE.LOCK_OWNER_CHANGED,\n            targetSelector,\n            owner,\n            sender: this.id,\n            seqNum,\n        };\n\n        for (const conn of this.connections) {\n            conn.send(msg);\n        }\n        this.receiveMessage(msg); // Tell itself that the lock owner has changed.\n    }\n\n    getId() {\n        return this.peer.getId();\n    }\n\n    onOpen() {\n        this.id = this.getId();\n\n        if (!this.leaderId) {\n            this.leaderId = this.id;\n        }\n\n        this.connectToPeer(this.id);\n\n        if (this.leaderId && this.leaderId !== this.id) {\n            this.connectToPeer(this.leaderId);\n        }\n        this.onOpenCallback();\n        this.onConnectionCallback();\n    }\n\n    getNumberOfConnections() {\n        return this.connections.length;\n    }\n\n    async onConnected(connection: VcConnection) {\n        // Incoming connection: Leader or client receives connection from client.\n        const peer = connection.getPeer();\n\n        this.peers.push(peer);\n        this.connections.push(connection);\n        //console.log(\"New incoming connection\", this.peers, this.connections.length);\n\n        this.onConnectionCallback();\n\n        if (peer === this.leaderId) {\n            // This is in case the incoming connection is the leader.\n            this.leaderConnection = connection;\n            if (this.onDoneLoading) {\n                this.onDoneLoading();\n            }\n        }\n\n        await connection.open();\n        connection.messages.subscribe(this.receiveMessage.bind(this));\n\n        if (this.leaderId === this.id) {\n            this.sendNewConnection(connection);\n        }\n    }\n\n    async onDisconnected() {\n        this.sendDisconnectMessage();\n    }\n\n    async connectToPeer(id: string) {\n        // Outgoing connection: Client connects to leader or other client.\n        const connection: VcConnection = await this.peer.connect(id);\n\n        this.connections.push(connection);\n        this.peers.push(id);\n        //console.log(\"New outgoing connection\", this.peers, this.connections.length);\n\n        this.onConnectionCallback();\n\n        const peer = connection.getPeer();\n\n        if (peer === this.leaderId) {\n            this.leaderConnection = connection;\n        }\n\n        connection.messages.subscribe(this.receiveMessage.bind(this));\n    }\n\n    receiveMessage(data: VcMessage) {\n        if (data.type === VC_MESSAGE_TYPE.NEW_CONNECTION) {\n            this.receiveNewConnection(data as InitMessage);\n        } else if (data.type === VC_MESSAGE_TYPE.EVENT) {\n            const msg = data as VcEventsMessage;\n            this.onEventReceived(msg.data, msg.sender);\n        } else if (data.type === VC_MESSAGE_TYPE.LOCK_REQUESTED) {\n            const msg = data as LockRequestMessage;\n            this.onLockRequested(msg.targetSelector, msg.requester);\n        } else if (data.type === VC_MESSAGE_TYPE.LOCK_OWNER_CHANGED) {\n            const msg = data as LockOwnerChangedMessage;\n            this.onNewLockOwner(msg.targetSelector, msg.owner, msg.seqNum);\n        } else if (data.type === VC_MESSAGE_TYPE.DISCONNECTION) {\n            const msg = data as DisconnectMessage;\n            this.recieveDisconnectMessage(msg);\n        }\n    }\n\n    broadcastEvent(e: VcEvent) {\n        if (!this.eventsMsg) {\n            this.eventsMsg = {\n                type: VC_MESSAGE_TYPE.EVENT,\n                sender: this.id,\n                data: [],\n            };\n        }\n        this.eventsMsg.data.push(e);\n\n        this.throttledSendEvents();\n    }\n\n    throttledSendEvents() {\n        if (!this.eventsMsg) {\n            return;\n        }\n\n        const onSend = () => {\n            if (!this.eventsMsg) {\n                return;\n            }\n            for (const conn of this.connections) {\n                conn.send(this.eventsMsg);\n            }\n            this.lastEventsMessageTime = Date.now();\n            this.eventsMsg = undefined;\n            this.throttleTimeout = -1;\n        };\n\n        window.requestAnimationFrame(onSend);\n    }\n\n    sendNewConnection(conn: VcConnection) {\n        const decoratedMessage: InitMessage = {\n            type: VC_MESSAGE_TYPE.NEW_CONNECTION,\n            sender: this.id,\n            peers: this.peers as string[],\n            eventsLedger: this.getPastEvents(),\n        };\n\n        this.loadTask(() => conn.send(decoratedMessage), 'Updating newly joined collaborators..');\n    }\n\n    receiveNewConnection(data: InitMessage) {\n        //console.log(\"New connection message\", data);\n        for (let i = 0; i < data.peers.length; i++) {\n            if (this.peers.indexOf(data.peers[i]) === -1) {\n                console.log('connecting to new peer', data.peers[i]);\n                this.connectToPeer(data.peers[i]);\n            }\n        }\n\n        if (this.onDoneLoading) {\n            this.onDoneLoading();\n        }\n        this.onEventReceived(data.eventsLedger, data.sender, true);\n    }\n\n    sendDisconnectMessage() {\n        const decoratedMessage: DisconnectMessage = {\n            type: VC_MESSAGE_TYPE.DISCONNECTION,\n            sender: this.id,\n        };\n\n        for (const conn of this.connections) {\n            conn.send(decoratedMessage);\n        }\n    }\n\n    recieveDisconnectMessage(msg: DisconnectMessage) {\n        console.log('Peer', msg.sender, 'is disconnecting');\n\n        for (const conn of this.connections) {\n            //console.log('Requesting lock', msg);\n            if (conn.getPeer() === msg.sender) {\n                console.log('Removing peer and connection');\n                this.peers.splice(this.peers.indexOf(msg.sender), 1);\n                this.connections.splice(this.connections.indexOf(conn), 1);\n            }\n        }\n        this.onConnectionCallback();\n    }\n\n    private loadTask(task: () => void, loadMessage: string) {\n        if (this.onLoading) {\n            this.onLoading(loadMessage);\n            window.setTimeout(() => {\n                task();\n                if (this.onDoneLoading) {\n                    this.onDoneLoading();\n                }\n            }, 10);\n        } else {\n            task();\n        }\n    }\n}\n\nexport enum VC_MESSAGE_TYPE {\n    NEW_CONNECTION,\n    EVENT,\n    LOCK_REQUESTED,\n    LOCK_VOTE,\n    LOCK_OWNER_CHANGED,\n    DISCONNECTION,\n}\n\nexport interface VcMessage {\n    peers?: string[];\n    type: VC_MESSAGE_TYPE;\n    sender: string;\n    data?: any;\n}\n\nexport interface VcEventsMessage extends VcMessage {\n    type: VC_MESSAGE_TYPE.EVENT;\n    data: VcEvent[];\n}\n\nexport interface InitMessage extends VcMessage {\n    type: VC_MESSAGE_TYPE.NEW_CONNECTION;\n    peers: string[];\n    eventsLedger: VcEvent[];\n}\n\nexport interface DisconnectMessage extends VcMessage {\n    type: VC_MESSAGE_TYPE.DISCONNECTION;\n}\n\nexport interface LockRequestMessage extends VcMessage {\n    type: VC_MESSAGE_TYPE.LOCK_REQUESTED;\n    targetSelector: string;\n    requester: string;\n}\n\nexport interface LockOwnerChangedMessage extends VcMessage {\n    type: VC_MESSAGE_TYPE.LOCK_OWNER_CHANGED;\n    targetSelector: string;\n    owner: string;\n    seqNum: number;\n}\n","import {StrippedEvent} from './listener';\nimport {VcCommunication, VcCommunicationConstructor, VcCommunicationI} from './communication';\nimport {VcEvent} from './visconnect';\n\nexport class VcProtocol {\n    ledgers = new Map<string, VcEvent[]>();\n    protected lockOwners = new Map<string, string>();\n    protected requestedLocks = new Set<string>();\n    protected heldEvents = new Map<string, StrippedEvent[]>();\n    protected heldRemoteEvents = new Map<string, VcEvent[]>();\n    communication: VcCommunicationI;\n    protected collaboratorId = '';\n    onLoading?: (message: string) => void;\n    onDoneLoading?: () => void;\n\n    constructor(\n        protected leaderId: string,\n        protected ownId: string,\n        protected executeEvent: (e: StrippedEvent) => void,\n        protected cancelEvent: (e: StrippedEvent) => void,\n        protected unsafeElements: string[],\n        MockCommunication?: VcCommunicationConstructor\n    ) {\n        const Communication = MockCommunication ? MockCommunication : VcCommunication;\n        this.communication = new Communication({\n            leaderId: leaderId,\n            ownId: ownId,\n            onEventReceived: this.receiveRemoteEvents.bind(this),\n            onNewLockOwner: this.lockOwnerChanged.bind(this),\n            getPastEvents: this.getPastEvents.bind(this),\n            onLockRequested: this.receiveLockRequest.bind(this),\n            onOpenCallback: this.init.bind(this),\n        });\n\n        this.communication.init();\n    }\n\n    init() {\n        this.collaboratorId = this.communication.getId();\n    }\n\n    getPastEvents() {\n        const events = Array.from(this.ledgers.values()).reduce((a, b) => a.concat(b), []);\n        return events.sort((a, b) => a.event.timeStamp - b.event.timeStamp);\n    }\n\n    localEvent(stripped: StrippedEvent) {\n        const selector = stripped.target;\n        stripped.collaboratorId = this.communication.getId();\n        //console.log('local event on ', selector, this.lockOwners.get(selector), this.collaboratorId);\n\n        // All clients are allowed to interact with the unsafe elements.\n        const allAllowed =\n            this.unsafeElements.includes(stripped.targetType) || this.unsafeElements.includes('*');\n        const lockOwner = this.lockOwners.get(selector);\n\n        if (allAllowed || (lockOwner && lockOwner === this.collaboratorId)) {\n            const vcEvent = this.makeVcEvent(stripped);\n            const success = this.addEventToLedger(vcEvent, this.collaboratorId);\n            if (success) {\n                this.communication.broadcastEvent(vcEvent);\n            }\n        } else if (lockOwner && lockOwner !== this.collaboratorId) {\n            // Do nothing - do not execute the event.\n            this.cancelEvent(stripped);\n        } else {\n            if (!this.heldEvents.has(selector)) {\n                this.heldEvents.set(selector, []);\n            }\n            this.heldEvents.get(selector)!.push(stripped);\n            //console.log('held', this.heldEvents.get(selector));\n\n            this.requestLock(selector);\n        }\n    }\n\n    receiveRemoteEvents(events: VcEvent[], sender: string, catchup = false) {\n        if (events.length > 100 && this.onLoading) {\n            this.onLoading(`Catching up to collaborators by re-playing ${events.length} events..`);\n\n            // Wait one frame to give the browser time to display a loading screen.\n            setTimeout(() => {\n                this.replayEvents(events, sender, catchup);\n\n                if (this.onDoneLoading) {\n                    this.onDoneLoading();\n                }\n            }, 10);\n        } else {\n            this.replayEvents(events, sender, catchup);\n        }\n    }\n\n    private replayEvents(events: VcEvent[], sender: string, catchup = false) {\n        for (const event of events) {\n            const ledger = this.ledgers.get(event.event.target);\n            let lastSeqNum = ledger && ledger.length ? ledger[ledger.length - 1].seqNum : -1;\n            this.playHeldRemoteEvents(event.event.target, lastSeqNum);\n            lastSeqNum = ledger && ledger.length ? ledger[ledger.length - 1].seqNum : -1;\n\n            if (event.seqNum !== lastSeqNum + 1) {\n                this.holdRemoteEvent(event);\n            } else {\n                const success = this.addEventToLedger(event, sender, catchup);\n                if (!success && !this.lockOwners.has(event.event.target)) {\n                    this.holdRemoteEvent(event);\n                }\n            }\n        }\n    }\n\n    protected holdRemoteEvent(event: VcEvent) {\n        if (!this.heldRemoteEvents.has(event.event.target)) {\n            this.heldRemoteEvents.set(event.event.target, []);\n        }\n        this.heldRemoteEvents.get(event.event.target)!.push(event);\n        //console.log('adding event to held remote events on ', this.collaboratorId);\n    }\n\n    receiveLockRequest(selector: string, requester: string) {\n        console.error('Clients are not supposed to receive lock requests.');\n    }\n\n    lockOwnerChanged(selector: string, owner: string, seqNum: number) {\n        //console.log('Lock owner changed', selector, owner, this.collaboratorId, this.heldEvents.has(selector), this.heldEvents.get(selector));\n        this.requestedLocks.delete(selector);\n\n        if (!owner) {\n            this.lockOwners.delete(selector);\n            this.heldEvents.delete(selector);\n            return;\n        }\n        this.lockOwners.set(selector, owner);\n\n        if (owner === this.collaboratorId && this.heldEvents.has(selector)) {\n            // Finally, trigger these held up events.\n            const events = this.heldEvents.get(selector)!;\n            //console.log('Triggering some held up events', events);\n            for (const stripped of events) {\n                if (this.canExecuteEvent(stripped, this.collaboratorId)) {\n                    const vcEvent = this.makeVcEvent(stripped);\n                    const success = this.addEventToLedger(vcEvent, this.collaboratorId);\n                    if (success) {\n                        this.communication.broadcastEvent(vcEvent);\n                    }\n                }\n            }\n            this.heldEvents.delete(selector);\n        } else if (this.heldRemoteEvents.has(selector)) {\n            this.playHeldRemoteEvents(selector, seqNum);\n        }\n    }\n\n    protected playHeldRemoteEvents(selector: string, seqNum: number) {\n        const held = this.heldRemoteEvents.get(selector);\n        if (!held) {\n            return;\n        }\n        const filtered = held.filter((e) => e.seqNum >= seqNum).sort((a, b) => a.seqNum - b.seqNum);\n\n        for (const event of filtered) {\n            this.addEventToLedger(event, event.sender, false);\n        }\n        //this.heldRemoteEvents.delete(selector);\n    }\n\n    protected requestLock(selector: string) {\n        if (this.requestedLocks.has(selector)) {\n            return;\n        }\n        //console.log('Requesting lock on ', selector);\n\n        const success = this.communication.requestLock(selector);\n        if (success) {\n            this.requestedLocks.add(selector);\n        }\n    }\n\n    protected canExecuteEvent(stripped: StrippedEvent, sender: string, catchup = false) {\n        const selector = stripped.target;\n        const allAllowed =\n            this.unsafeElements.includes(stripped.targetType) || this.unsafeElements.includes('*');\n\n        // Skip ownership check for catchup events, and for background events.\n        if (!catchup && !allAllowed) {\n            const lockOwner = this.lockOwners.get(selector);\n            if (!lockOwner) {\n                return false;\n            } else if (lockOwner !== sender) {\n                console.error(\n                    'Trying to execute event on element with different lock owner',\n                    selector,\n                    lockOwner,\n                    sender\n                );\n                return false;\n            }\n        }\n        return true;\n    }\n\n    protected makeVcEvent(stripped: StrippedEvent): VcEvent {\n        const ledger = this.ledgers.get(stripped.target);\n        let seqNum = 0;\n        if (ledger && ledger.length) {\n            const lastEvent = ledger[ledger.length - 1];\n            seqNum = lastEvent.seqNum + 1;\n        }\n\n        return {\n            seqNum,\n            event: stripped,\n            sender: this.collaboratorId,\n        };\n    }\n\n    protected addEventToLedger(event: VcEvent, sender: string, catchup = false) {\n        const stripped = event.event;\n        const selector = stripped.target;\n\n        if (!this.canExecuteEvent(stripped, sender, catchup)) {\n            return false;\n        }\n\n        if (!this.ledgers.has(selector)) {\n            this.ledgers.set(selector, []);\n        }\n        const ledger = this.ledgers.get(selector)!;\n        let seqNum = 0;\n        if (ledger.length) {\n            const lastEvent = ledger[ledger.length - 1];\n            seqNum = lastEvent.seqNum + 1;\n        }\n\n        if (event.seqNum === seqNum) {\n            ledger.push(event);\n            //console.log(seqNum, stripped.type);\n            this.executeEvent(stripped);\n            return true;\n        } else {\n            // The order is not right.\n            //safeErrorLog('cant execute event with wrong sequence number', event.seqNum, event);\n            return false;\n        }\n    }\n}\n\nlet safeLogCount = 0;\n\nfunction safeLog(...logContents: any) {\n    if (safeLogCount < 100) {\n        safeLogCount++;\n        console.log(...logContents);\n    }\n}\nfunction safeErrorLog(...logContents: any) {\n    if (safeLogCount < 100) {\n        safeLogCount++;\n        console.error(...logContents);\n    }\n}\n","import {VcCommunicationI} from './communication';\n\nexport class LockService {\n    protected lockOwners = new Map<string, string>();\n    protected lockTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n    public expireTimeoutMs = 1000;\n\n    constructor(protected communication: VcCommunicationI) {}\n\n    requestLock(selector: string, client: string, seqNum: number) {\n        if (this.lockOwners.has(selector)) {\n            return;\n        }\n\n        this.lockOwners.set(selector, client);\n        this.communication.changeLockOwner(selector, client, seqNum);\n    }\n\n    extendLock(selector: string) {\n        // Delete any previous timeouts\n        const prevTimeout = this.lockTimeouts.get(selector);\n        if (prevTimeout) {\n            clearTimeout(prevTimeout);\n        }\n        const timeout = setTimeout(this.expireLock(selector), this.expireTimeoutMs);\n        this.lockTimeouts.set(selector, timeout);\n    }\n\n    private expireLock(selector: string) {\n        return () => {\n            this.lockOwners.delete(selector);\n            this.communication.changeLockOwner(selector, '', -1);\n        };\n    }\n}\n","import {VcProtocol} from './protocol';\nimport {StrippedEvent} from './listener';\nimport {VcCommunicationConstructor} from './communication';\nimport {LockService} from './lock-service';\nimport {VcEvent} from './visconnect';\n\nexport class VcLeaderProtocol extends VcProtocol {\n    lockService: LockService;\n\n    constructor(\n        protected leaderId: string,\n        protected ownId: string,\n        protected executeEvent: (e: StrippedEvent) => void,\n        protected cancelEvent: (e: StrippedEvent) => void,\n        protected unsafeElements: string[],\n        mockCommunication?: VcCommunicationConstructor\n    ) {\n        super(leaderId, ownId, executeEvent, cancelEvent, unsafeElements, mockCommunication);\n\n        this.lockService = new LockService(this.communication);\n    }\n\n    receiveLockRequest(selector: string, requester: string) {\n        const ledger = this.ledgers.get(selector);\n        const seqNum = !ledger ? 0 : ledger[ledger.length - 1].seqNum + 1;\n        this.lockService.requestLock(selector, requester, seqNum);\n    }\n\n    protected addEventToLedger(event: VcEvent, sender: string) {\n        const success = super.addEventToLedger(event, sender);\n\n        if (success) {\n            this.lockService.extendLock(event.event.target);\n        }\n\n        return success;\n    }\n}\n","import {VcListener, StrippedEvent} from './listener';\nimport {recreateEvent, stopPropagation} from './dom';\nimport {VcProtocol} from './protocol';\nimport {VcLeaderProtocol} from './leader-protocol';\nimport {VisConnectUtil} from './util';\n\nexport interface VcEvent {\n    seqNum: number;\n    event: StrippedEvent;\n    sender: string;\n}\n\nexport class Visconnect {\n    private listener: VcListener;\n    protocol: VcProtocol;\n    onEventCancelled: (event: StrippedEvent) => void = () => {};\n\n    constructor(\n        private svg: Element,\n        ownId: string,\n        leaderId: string,\n        private safeMode = true,\n        customEvents?: string[],\n        ignoreEvents?: string[]\n    ) {\n        const isLeader = leaderId === ownId;\n        const Protocol = isLeader ? VcLeaderProtocol : VcProtocol;\n\n        const unsafeElements = safeMode ? ['body', 'svg', 'g'] : ['*'];\n\n        this.protocol = new Protocol(\n            leaderId,\n            ownId,\n            this.executeEvent.bind(this),\n            this.cancelEvent.bind(this),\n            unsafeElements\n        );\n        this.listener = new VcListener(\n            this.svg,\n            this.localEvent.bind(this),\n            customEvents,\n            ignoreEvents\n        );\n    }\n\n    localEvent(stripped: StrippedEvent, event: Event) {\n        stopPropagation(event);\n        event.preventDefault();\n        const debugDelay = (window as any)['visconnect-event-delay'];\n        const handleLocalEvent = () => this.protocol.localEvent(stripped);\n        debugDelay ? setTimeout(handleLocalEvent, debugDelay) : handleLocalEvent();\n    }\n\n    cancelEvent(event: StrippedEvent) {\n        this.onEventCancelled(event);\n    }\n\n    executeEvent(stripped: StrippedEvent) {\n        const event = recreateEvent(stripped, this.svg);\n        //console.log('executing event', stripped, event);\n\n        (event as any)['visconnect-received'] = true;\n        (event as any)['collaboratorId'] = stripped.collaboratorId;\n        (event as any)['collaboratorColor'] = VisConnectUtil.stringToHex(stripped.collaboratorId);\n        (event as any)['isLocalEvent'] =\n            stripped.collaboratorId === this.protocol.communication.getId();\n        if (event.target) {\n            event.target.dispatchEvent(event);\n\n            if (event.type === 'click') {\n                (event.target as HTMLElement).focus();\n            }\n        }\n    }\n}\n","import {VisConnectUi} from './ui';\nimport {Visconnect} from './visconnect';\nimport {VisConnectUtil} from './util';\nimport {delayAddEventListener, disableStopPropagation} from './dom';\nvar visconnect;\nvar visconnectUi;\n\nlet parts = window.location.href.match(/\\?visconnectid=([a-z0-9\\-]+)/);\nconst ownId = [...Array(10)].map((i) => (~~(Math.random() * 36)).toString(36)).join('');\nconst leaderId = parts ? parts[1] : ownId;\n\n(window as any).vc = {\n    drag: VisConnectUtil.drag,\n    brush: VisConnectUtil.brush,\n    mouse: VisConnectUtil.mouse,\n    lasso: VisConnectUtil.lasso,\n    random: VisConnectUtil.random(leaderId),\n    leaderId: leaderId,\n    ownId: ownId,\n};\n\nconsole.log('init vislink');\ndisableStopPropagation();\ndelayAddEventListener().then(() => {\n    let el: Element;\n\n    const elsWithAttribute = document.querySelectorAll('[collaboration]');\n    const svg = document.getElementsByTagName('svg')[0];\n    let safeMode = true;\n    let customEvents: string[] | undefined = undefined;\n    let ignoreEvents: string[] | undefined = undefined;\n\n    if (elsWithAttribute.length) {\n        el = elsWithAttribute[0];\n        const val = el.getAttribute('collaboration');\n        if (val && val === 'live') {\n            safeMode = false;\n        }\n        const customEventsVal = el.getAttribute('custom-events');\n        if (customEventsVal) {\n            customEvents = customEventsVal.replace(/ /g, '').split(',');\n        }\n        const ignoreEventsVal = el.getAttribute('ignore-events');\n        if (ignoreEventsVal) {\n            ignoreEvents = ignoreEventsVal.replace(/ /g, '').split(',');\n        }\n    } else if (svg) {\n        el = svg;\n    } else {\n        el = document.body;\n    }\n\n    console.log('start visconnect');\n    visconnect = new Visconnect(el, ownId, leaderId, safeMode, customEvents, ignoreEvents);\n\n    visconnectUi = new VisConnectUi(visconnect, el);\n    visconnect.onEventCancelled = visconnectUi.eventCancelled.bind(visconnectUi);\n});\n"],"names":["twoProduct","scalarScalar","robustSubtract","orient","classifyPoint","tslib_1.__extends"],"mappings":"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"}